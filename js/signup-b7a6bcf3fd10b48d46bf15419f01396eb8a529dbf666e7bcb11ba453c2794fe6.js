function selectCustom(){var t="checked",e=100,i=$(".select-custom .select-custom-input"),n=$(".select-custom .select-custom-frame li");i.each(function(){this.onclick=function(){var t=$(this).siblings(".select-custom-frame");t.is(":visible")?t.fadeOut(e):t.fadeIn(e)}}),$(document).on("click",function(){$(".select-custom .select-custom-frame").fadeOut(e)}).on("click",".select-custom",function(t){t.stopPropagation()}),n.each(function(){this.onclick=function(){var i=$(this);if(!i.hasClass("disabled")){var n=i.parents(".select-custom").find(".selected-value input"),s=i.parents(".select-custom-frame");n.val(i.data("selected-value")),n.data("value",i.data("value")),i.addClass(t).siblings().removeClass(t),s.fadeOut(e)}}})}var ShowToast=function(){this.icons={success:"%3Csvg class='icon' width='200' height='200' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%23f3f3f3' d='M1024 512c0 281.6-230.4 512-512 512S0 793.6 0 512 230.4 0 512 0c112 0 220.8 35.2 310.4 105.6 12.8 9.6 16 32 6.4 44.8-9.6 12.8-32 16-44.8 6.4C704 96 611.2 64 512 64 265.6 64 64 265.6 64 512s201.6 448 448 448 448-201.6 448-448c0-19.2 12.8-32 32-32s32 12.8 32 32z'/%3E%3Cpath fill='%23f3f3f3' d='M982.4 275.2L576 681.6c-19.2 19.2-44.8 28.8-67.2 28.8-25.6 0-48-9.6-67.2-28.8L259.2 499.2c-12.8-12.8-12.8-32 0-44.8 12.8-12.8 32-12.8 44.8 0l182.4 182.4c12.8 12.8 32 12.8 44.8 0l406.4-406.4c12.8-12.8 32-12.8 44.8 0 12.8 9.6 12.8 32 0 44.8z'/%3E%3C/svg%3E",warning:"%3Csvg class='icon' width='200' height='200' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%23f3f3f3' d='M873.439 960.4H152.591c-48.34 0-87.174-19.097-106.568-52.405-19.399-33.308-17.039-76.816 6.499-119.331L416.23 131.772C439.905 88.947 475.11 64.4 512.775 64.4c37.67 0 72.84 24.517 96.581 67.304l364.09 657.027c23.532 42.516 25.966 85.992 6.531 119.296-19.363 33.307-58.229 52.373-106.538 52.373zM512.812 133.356c-11.976 0-25.693 11.964-36.813 31.998L112.291 822.313c-11.396 20.618-14.063 39.138-7.256 50.821 6.813 11.654 24.155 18.347 47.557 18.347H873.44c23.439 0 40.75-6.656 47.558-18.347 6.771-11.653 4.14-30.166-7.287-50.785L549.626 165.354c-11.088-20.034-24.875-31.998-36.814-31.998zm.205 515.978c-18.883 0-34.21-15.414-34.21-34.479v-310.31c0-19.033 15.327-34.48 34.21-34.48 18.886 0 34.213 15.447 34.213 34.48v310.309c-.001 19.066-15.328 34.48-34.213 34.48zm-.246 168.537c29.441 0 53.309-24.096 53.309-53.819s-23.867-53.819-53.309-53.819-53.308 24.096-53.308 53.819 23.867 53.819 53.308 53.819z'/%3E%3C/svg%3E"},this.timer=null,this.init()};ShowToast.prototype.init=function(){$(".pop-toast").remove(),this.createDom()},ShowToast.prototype.show=function(t){var e=this.icons[t.type],i=$(".pop-toast");i.css("position","fixed"),i.children("i").css({background:'url("data:image/svg+xml,'+e+'") no-repeat center',"background-size":"100%"}),i.children("p").html(t.message),i.show(),clearTimeout(this.timer),this.setFadeOut(t.time||1e3,i)},ShowToast.prototype.createDom=function(){var t=$("body").attr("class"),e=t&&t.indexOf("rtl-layout")>-1;this.$popToastDiv=$(document.createElement("div")),this.$popToastIcon=$(document.createElement("i")),this.$popToastP=$(document.createElement("p")),this.$popToastDiv.addClass("pop-toast"),this.$popToastDiv.css({position:"absolute",display:"none",padding:"10px 15px","text-align":"center",top:"95px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.5)","box-shadow":"0 2 px 8 px #ccc","border-radius":"20px","z-index":1e4}),this.$popToastIcon.css({display:"inline-block",width:"16px",height:"16px","vertical-align":"middle"}),this.$popToastP.css({display:"inline-block","font-size":"14px","line-height":"14px",color:"#f0f0f0","vertical-align":"middle",margin:e?"0 10px 0 0":"0 0 0 10px"}),this.$popToastDiv.append(this.$popToastIcon).append(this.$popToastP),$("body").append(this.$popToastDiv)},ShowToast.prototype.setFadeOut=function(t,e){t&&(this.timer=setTimeout(function(){e.fadeOut(200)},t))},function(){var t;t=new ShowToast,$(function(){var e,i,n;return e=function(){function e(){}return e.prototype.toast=function(e){return t.show({message:e,type:"warning",time:2e3})},e.prototype.validate=function(t){var e,i,n,s,a,o,r,c,p;return r=t.parent().parent().find("input.phone-number"),p=t.parent().parent().find("input.verification-code"),s=t.parent().parent().find("input#user_email"),o=t.parent().parent().find("input#user_password"),a=t.parent().parent().find("#user_profile_attributes_first_name"),$(".register-plan-B").length>0?s.val()?r.val()?!!p.val()||void this.toast("验证码不能为空"):void this.toast("手机号不能为空"):void this.toast(I18n.t("js.api.registrations.create.errors.missing_params")):$(".register-plan-C").length>0?(e=t.parents("form"),i=e.find(".terms-check"),n=i.prop("checked"),c=e.find(".sign-up-button").data("terms-not-checked"),i.length>0&&!n?void this.toast(c):r.val()?!!p.val()||void this.toast("验证码不能为空"):void this.toast("手机号不能为空")):a.val()&&s.val()?!!o.val()||void this.toast(I18n.t("js.landing_page.password_can_not_be_empty")):void this.toast(I18n.t("js.api.registrations.create.errors.missing_params"))},e.prototype.onSubmitCheck=function(){var t;return t=this,$(".sign-up-button").click(function(e){if(!t.validate($(this)))return e.preventDefault()})},e}(),n=new e,n.onSubmitCheck(),selectCustom(),$(".submit").click(function(){if(0===$(this).find(".submit").length)return $(this).addClass("disabled")}),$(".new-user-form").bind("ajax:success",function(t,e,i,n){if("redirect"===e.status)return window.location=e.to}).bind("ajax:error",function(e,i,n){var s,a;if(500===i.status?s=I18n.t("js.api.registrations.errors.500"):(a=jQuery.parseJSON(i.responseText),a.message&&a.message.i18n?(s=I18n.t(a.html,a.message.i18n),analytics.track("Registration - failed - Landing",{error:s})):s=I18n.t(a.html)),t.show({message:s,type:"warning"}),$(".submit").removeClass("disabled"),$(".captcha").length>0)return $(".captcha").trigger("click")}).submit(function(){return $(".error.error-msg").slideUp()}),i=function(){var t;try{return $(":-webkit-autofill").each(function(){return $(this).closest(".field").find("label, .label").hide()})}catch(e){t=e}},i(),setTimeout(function(){return i()},2e3),$(".signup-arrow").each(function(){var t,e,i,n,s;return s=$(this),t=!0,i=function(){return s.animate({left:"-55"},600,"easeInSine",n)},n=function(){var e;return e=t?i:null,s.animate({left:"-45"},600,"easeOutSine",e)},i(),e=s.parent().find("input"),e.focus(function(){return t=!1,s.stop().fadeOut(200)}),e.blur(function(){return""!==e.val()?s.stop().fadeOut(200):(s.stop().fadeIn(200),i(),t=!0)}),s.click(function(){return $("#user_profile_attributes_first_name",s.parent()).focus()})}),$(".signup-with-email-button").click(function(){return $(".row.both-signup").slideUp(),$(".row.email-signup").slideDown(),$(".facebook-login-container").slideDown(),$(".linkedin-login-container").slideDown()}),$(".change-sign-in").click(function(){var t,e,i,n;return i=$(".sign-in-form"),e=$(".login-method-content .login-by-password"),t=$(".login-method-content .login-by-captcha"),n=$.cookie("login_active_type"),"captcha"===n?i.stop().animate({"margin-top":10,opacity:0},function(){var n,s;return t.hide(),i.css({"margin-top":10,opacity:0}),e.show(),i.animate({"margin-top":0,opacity:1}),$(".change-sign-in").text("使用短信验证码登录"),n=$(".choose-account-type span"),s="phone_password",n.eq(1).hasClass("active")?(s="email_password",n.eq(1).addClass("active").siblings().removeClass("active")):n.eq(0).addClass("active").siblings().removeClass("active"),$.cookie("login_active_type",s,{path:"/"})}):i.stop().animate({"margin-top":10,opacity:0},function(){return e.hide(),i.css({"margin-top":10,opacity:0}),t.show(),i.animate({"margin-top":0,opacity:1}),$(".change-sign-in").text("使用账号密码登录"),$.cookie("login_active_type","captcha",{path:"/"})})})})}.call(this);
